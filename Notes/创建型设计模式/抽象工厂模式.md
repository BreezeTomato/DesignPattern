
### 抽象工厂模式的定义

抽象工厂模式是一种**创建型设计模式**，提供了一个创建一系列相关或相互依赖对象的接口，而无需指定他们具体的类。在理解方面，我们可以将其与[[工厂方法模式]]联系看待。

抽象工厂模式涉及到“**多类**”对象，在方法工厂模式中，每个具体工厂只负责创建单一的产品。但是如果有多类产品时，比如说“手机”，一个品牌的手机有高端、中端、低端之分，这些具体的产品都需要建立一个单独的工厂类，但是他们都是相互关联的，都共同属于一个品牌，这就可以使用到“**抽象工厂模式**”。

抽象工厂模式可以确保一系列相关的产品被一起创建，这些产品能够相互配合使用，比如，有一些家具，沙发、茶几、椅子，又具有古典风格和现代风格之分，抽象工厂模式可以将生产现代风格的家具放在一个工厂类中，将生产古典峰峰的家具放在另一个工厂类中，这样每个工厂类就可以生产一系列的家具。

### 抽象工厂模式的基本结构

抽象工厂模式包含**多个抽象产品接口**，**多个具体产品类**，**一个抽象工厂接口**和**多个具体工厂**，每个具体工厂负责创建一组相关的产品。

- 抽象产品接口`AbstractProduct`：定义产品的接口，可以定义多个抽象产品接口，比如沙发、椅子、茶几都是抽象产品。
- 具体产品类`ConcreteProduct`：实现抽象产品接口，产品的具体实现，古典风格沙发和现代风格的沙发都是具体产品。
- 抽象工厂接口`AbstractFactory`：声明一组用于创建产品的方法，每个方法对应一个产品。
- 具体工厂类`ConcreteFactory`：实现抽象工厂接口，负责一组具体产品的对象，如生产古典风格的工厂和生产现代风格的工厂都是具体的实例。
![[Pasted image 20250227154636.png]]
在上图中：`AbstractProductA/B/C`就是抽象产品，`ConcreteProductA1/A2/B1/B2/C1/C2`就是抽象产品的实现，`AbstractFactory`定义了抽象工厂接口，接口中的方法用于创建具体的产品，而`ConcreteFactory`就是具体工厂类，可以创建一组相关的产品。

### 抽象工厂模式的实现

想要实现抽象工厂模式，需要遵循以下步骤：

- **定义抽象产品接口**（可以有多个），接口中声明产品的公共方法。
- **实现具体产品类**，在类中实现抽象产品接口中的方法。
- **定义抽象工厂接口**，声明一组用于创建产品的方法。
- **实现具体工厂类**，分别实现抽象工厂接口中的方法，每个方法负责创建一组相关的产品。
- **客户端**中使用抽象工厂和抽象产品，而不直接使用具体产品的类名。

### 抽象工厂模式的应用场景

抽象工厂模式能够保证**一系列相关的产品一起使用**，并且在不修改客户端代码的情况下，可以**方便替换整个产品系列**。但是当需要增加新的产品类是，除了要增加新的具体产品类，还需要修改抽象工厂接口以及所有的具体工厂类，**扩展性相对较差**。因此，抽象工厂模式特别适用于一系列相关或相互依赖的产品被一起创建的情况。典型的应用场景是使用抽象工厂模式来创建与不同数据库的连接对象。

### 简单工厂、工厂方法、抽象工厂的区别

- 简单工厂模式：一个工厂方法创建**所有**具体产品
- [[工厂方法模式]]；一个工厂方法创建**一个**具体产品
- 抽象工厂模式：一个工厂方法创建**一类**具体产品
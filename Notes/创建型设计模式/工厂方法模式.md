### 简单工厂模式

在了解工厂方法模式之前，有必要先了解简单工厂模式。
简单工厂模式是一种创建型设计模式，但不属于23种设计模式之一，更多作为一种编程习惯。

简单工厂模式的核心思想是将产品创建过程[[封装]]在一个工厂类中，把创建对象的流程集中的这个工厂类里面。

简单工厂模式包括三个主要角色：工厂类、抽象产品、具体产品。下面的图示则展示了工厂类的基本结构。
![[Pasted image 20250226195233.png]]
- 抽象产品：如上图中的Shape接口，描述产品的通用行为。
- 具体产品：实现抽象产品接口或[[继承]]抽象产品类，如上图的Circle类和Square类，具体产品通过简单工厂类的if-else逻辑来实例化。
- 工厂类：负责创建产品，根据传递不同参数来创建不同的产品实例。

简单工厂类简化了客户端操作，客户端可以调用工厂方法来获取具体产品，无需直接与具体产品类交互，**降低了[[耦合]]**，但是有一个很大的问题是**不够灵活**，如果需要添加新的产品，则需要修改工厂类的代码。

### 工厂方法模式的定义

工厂方法模式是一种**创建型**设计模式，简单工厂模式只有一个工厂类，负责创建所有产品，如果需要添加新的产品，通常需要修改工厂类的代码。而工厂方法模式引入了**抽象工厂和具体工厂**的概念，**每个具体工厂只负责创建一个具体产品**，添加新的产品只需要添加新的工厂类而无需修改原来的代码，这样使得产品的生产更加灵活，**支持扩展**，符合开闭原则。

工厂方法模式分为以下几个角色：
- 抽象工厂：一个接口，包含一个抽象的工厂方法（用于创建产品对象）。
- 具体工厂：实现抽象工厂接口，创建具体的产品。
- 抽象产品：定义产品的接口。
- 具体产品：实现抽象产品接口，是工厂创建的对象。

![[Pasted image 20250226201105.png]]
（不同的工厂创建不同的对象）

### 工厂方法模式的应用场景

工厂方法模式使得每个工厂类的**职责单一**，每个工厂只负责创建一种产品，当创建对象**涉及一系列复杂的初始化逻辑**，**而这些逻辑在不同的子类中有可能有所不同时**，可以使用工厂方法模式将这些初始化逻辑[[封装]]在子类的工厂中。

- Spring 框架中的 Bean ⼯⼚：通过配置⽂件或注解。Spring 可以根据配置信息动态地创建和管理对象。
- JDBC 中的 Connection ⼯⼚：在 Java 数据库连接中， DriverManager 使⽤⼯⼚⽅法模式来创建数据库连接。不同的数据库驱动（如 MySQL、PostgreSQL 等）都有对应的⼯⼚来创建连接。
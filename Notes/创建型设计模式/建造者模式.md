
### 建造者模式的定义

建造者模式，也被称为“**生成器模式**”，是一种**创建型设计模式**。软件开发的过程中有的时候需要创建**很复杂的对象**，而建造者模式的**主要思想是将对象的构建过程分为多个步骤，并为每个步骤定义一个抽象的接口**。具体的构建过程由实现了这些接口的具体建造者类来完成。同时有一个指导者类负责协调建造者的工作，按照一定的顺序或逻辑来执行构建步骤，最终生成产品。

假设我们需要创建一个计算机对象，计算机由很多组件组成，例如CPU、内存、硬盘、显卡等。每一个组件可能又有不同的型号、配置和制造，这个时候计算机就可以被视为一个复杂对象，构建过程相对复杂，而我们使用建造者模式将计算机的**构建过程[[封装]]在一个具体的建造者类中**，而指导者类则负责指导构建的步骤和顺序。每个具体的建造者类可以负责构建不同型号或配置的计算机，客户端代码可以通过选择不同的建造者来创建不同类型的计算机，这样就可以根据需要构件不同表示的复杂对象，更加灵活。

### 建造者模式的基本结构

建造者模式有下面几个关键角色：

- 产品`Product`：被构建的复杂对象，包含多个组成部分。
- 抽象建造者`Builder`：定义构件产品各个部分的抽象接口和一个返回复杂产品的方法`getResult`
- 具体建造者`ConcreteBuilder`：实现抽象建造者接口，构建产品的各个组成部分，并且提供一个方法返回最终的产品。
- 指导者`Director`：调用具体建造者的方法，按照一定的顺序或逻辑来构建产品。

在客户端中，通过指导者来构建产品，而并不和具体建造者进行直接的交互。
![[Pasted image 20250228152240.png]]

### 建造者模式的实现

1. 定义产品类：产品类应该包含多个组成部分，这些部分的属性和方法构成了产品的接口；
2. 定义抽象建造者接口：创建一个接口，包含构建产品各个部分的抽象方法。这些方法通常用于设置产品的各个属性。
3. 创建具体建造者：实现抽象建造者接口，构建具体的产品。
4. 定义指导者类：指导者类控制构建产品的顺序和步骤。
5. 客户端使用建造者模式：在客户端中创建“**具体建造者对象**”和“**指导者对象**”，通过指导者来构建产品。

### 建造者模式的使用场景

使用建造者模式有以下几个优点：
- 使用建造者模式可以将一个复杂的构建与其表示分离，通过将构建复杂对象的过程抽象出来，可以使客户端代码与具体的构件过程解[[耦合]]；
- 同样的构建过程可以创建不同的表示，可以有多个具体的建造者（相互独立），可以更加灵活地创建不同组合的对象。